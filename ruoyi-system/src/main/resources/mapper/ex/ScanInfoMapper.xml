<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.ex.mapper.ScanInfoMapper">
    
	<resultMap type="ScanInfo" id="ScanInfoResult">
		<result property="scanId"    column="id"    />
		<result property="waybillNo"    column="waybill_no"    />
		<result property="scanType"    column="scan_type"    />
		<result property="scanTime"    column="scan_time"    />
		<result property="scanUserId"    column="scan_user_id"    />
		<result property="scanDeptId"    column="scan_dept_id"    />
		<result property="remark"    column="remark"    />
		<result property="nextDeptId"    column="next_dept_id"    />
		<result property="previousDeptId"    column="previous_dept_id"    />
		<result property="deliveryUserId"    column="delivery_user_id"    />
		<result property="signer"    column="signer"    />
	</resultMap>
	
	<sql id="selectScanInfoVo">
		select id, waybill_no, scan_type, scan_time, scan_user_id, scan_dept_id, remark, next_dept_id, previous_dept_id, delivery_user_id from ex_scan_temp
	</sql>
	
	<select id="selectScanInfoList" parameterType="ScanInfo" resultMap="ScanInfoResult">
		<include refid="selectScanInfoVo"/>
		<where>  
			<if test="scanId != null "> and id = #{scanId}</if>
 			<if test="waybillNo != null  and waybillNo != '' "> and waybill_no = #{waybillNo}</if>
 			<if test="scanType != null "> and scan_type = #{scanType}</if>
 			<if test="scanTime != null "> and scan_time = #{scanTime}</if>
 			<if test="scanUserId != null "> and scan_user_id = #{scanUserId}</if>
 			<if test="scanDeptId != null "> and scan_dept_id = #{scanDeptId}</if>
 			<if test="remark != null  and remark != '' "> and remark = #{remark}</if>
 			<if test="nextDeptId != null "> and next_dept_id = #{nextDeptId}</if>
 			<if test="previousDeptId != null "> and previous_dept_id = #{previousDeptId}</if>
 			<if test="deliveryUserId != null "> and delivery_user_id = #{deliveryUserId}</if>
 		</where>
	</select>
	
	<select id="selectScanInfoById" parameterType="Long" resultMap="ScanInfoResult">
		<include refid="selectScanInfoVo"/>
		where id = #{scanId}
	</select>
        
	<insert id="insertScanInfo" parameterType="ScanInfo" useGeneratedKeys="true" keyProperty="scanId">
		insert into ex_scan_temp
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="waybillNo != null  and waybillNo != ''  ">waybill_no,</if>
			<if test="scanType != null  ">scan_type,</if>
			<if test="scanTime != null  ">scan_time,</if>
			<if test="scanUserId != null  ">scan_user_id,</if>
			<if test="scanDeptId != null  ">scan_dept_id,</if>
			<if test="remark != null  and remark != ''  ">remark,</if>
			<if test="nextDeptId != null  ">next_dept_id,</if>
			<if test="previousDeptId != null  ">previous_dept_id,</if>
			<if test="deliveryUserId != null  ">delivery_user_id,</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="waybillNo != null  and waybillNo != ''  ">#{waybillNo},</if>
			<if test="scanType != null  ">#{scanType},</if>
			<if test="scanTime != null  ">#{scanTime},</if>
			<if test="scanUserId != null  ">#{scanUserId},</if>
			<if test="scanDeptId != null  ">#{scanDeptId},</if>
			<if test="remark != null  and remark != ''  ">#{remark},</if>
			<if test="nextDeptId != null  ">#{nextDeptId},</if>
			<if test="previousDeptId != null  ">#{previousDeptId},</if>
			<if test="deliveryUserId != null  ">#{deliveryUserId},</if>
		</trim>
	</insert>
	 
	<update id="updateScanInfo" parameterType="ScanInfo">
		update ex_scan_temp
		<trim prefix="SET" suffixOverrides=",">
			<if test="waybillNo != null  and waybillNo != ''  ">waybill_no = #{waybillNo},</if>
			<if test="scanType != null  ">scan_type = #{scanType},</if>
			<if test="scanTime != null  ">scan_time = #{scanTime},</if>
			<if test="scanUserId != null  ">scan_user_id = #{scanUserId},</if>
			<if test="scanDeptId != null  ">scan_dept_id = #{scanDeptId},</if>
			<if test="remark != null  and remark != ''  ">remark = #{remark},</if>
			<if test="nextDeptId != null  ">next_dept_id = #{nextDeptId},</if>
			<if test="previousDeptId != null  ">previous_dept_id = #{previousDeptId},</if>
			<if test="deliveryUserId != null  ">delivery_user_id = #{deliveryUserId},</if>
		</trim>
		where id = #{scanId}
	</update>

	<delete id="deleteScanInfoById" parameterType="Long">
		delete from ex_scan_temp where id = #{scanId}
	</delete>
	
	<delete id="deleteScanInfoByIds" parameterType="String">
		delete from ex_scan_temp where id in 
		<foreach item="scanId" collection="array" open="(" separator="," close=")">
 			#{scanId}
		</foreach>
	</delete>
    
</mapper>